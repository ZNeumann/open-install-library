---
- debug:
    msg: Install PHP

- name: install php pre-reqs
  yum:
    pkg:
      - yum-utils
      - epel-release
      - http://rpms.remirepo.net/enterprise/remi-release-7.rpm
    state: present
  become: yes

- name: enable PHP
  shell: "sudo yum-config-manager --enable remi-php72"
  become: yes

- name: install other pre-reqs
  yum:
    pkg:
      - php 
      - php-common
      - php-opcache
      - php-mcrypt
      - php-cli
      - php-gd
      - php-curl
      - php-mysqlnd
      - httpd
      - mariadb
      - mariadb-server
    state: present
  become: yes

- template:
    src: "{{ item }}"
    dest: ~/templates/
    mode: 0755
  with_fileglob:
    - ../../../../../templates/*
  become: yes

- shell:
    cmd: ~/templates/install-wordpress.sh
  become: yes
